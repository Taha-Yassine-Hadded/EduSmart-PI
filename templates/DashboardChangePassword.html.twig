<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css_yassine/dashboard.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <style>
        .hm:focus {
            outline: none;
            border-color: rgb(251, 251, 251);
            box-shadow: 0 0 0 0.15rem rgba(167, 1, 1, 0.5);
            }
    </style>

    <title>Admin Dashboard</title>
</head>
<body>
    <nav>
        <div class="logo-name">
            <div class="logo-image">
               <img src="/images/logo.png" alt="">
            </div>

            <span class="logo_name">EduSmart</span>
        </div>

        <div class="menu-items">
            <ul class="nav-links">
                <li><a href="#">
					<i class="uil uil-tachometer-fast-alt"></i>
                    <span class="link-name">Dahsboard</span>
                </a></li>
                <li><a href="{{ path('showDashboard') }}">
                    <i class="uil uil-user"></i>
                    <span class="link-name">Utilisateurs</span>
                </a></li>
				<li><a href="#">
                    <i class="uil uil-clock-eight"></i>
                    <span class="link-name">Evénements</span>
                </a></li>
				<li><a href="#">
                    <i class="uil uil-chart"></i>
                    <span class="link-name">Analytique</span>
                </a></li>
				<li><a href="{{ path('changePassword') }}">
                    <i class="uil uil-key-skeleton" style="color : #b5391d;"></i>
                    <span class="link-name" style="color : #b5391d;">Mot de passe</span>
                </a></li>
                <li><a href="{{ path('stage_stage') }}">
                    <i ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" height="26" color="#707070" fill="none">
    <path d="M6.5 9H5.5M10.5 9H9.5M6.5 6H5.5M10.5 6H9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
    <path d="M18.5 15H17.5M18.5 11H17.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
    <path d="M14 8V22H18C19.8856 22 20.8284 22 21.4142 21.4142C22 20.8284 22 19.8856 22 18V12C22 10.1144 22 9.17157 21.4142 8.58579C20.8284 8 19.8856 8 18 8H14ZM14 8C14 5.17157 14 3.75736 13.1213 2.87868C12.2426 2 10.8284 2 8 2C5.17157 2 3.75736 2 2.87868 2.87868C2 3.75736 2 5.17157 2 8V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M8.02485 13.9545C8.02485 15.0583 7.12945 15.953 6.02491 15.953C4.92038 15.953 4.02497 15.0583 4.02497 13.9545C4.02497 12.8508 4.92038 11.9561 6.02491 11.9561C7.12945 11.9561 8.02485 12.8508 8.02485 13.9545Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
    <path d="M2.06982 20.2101C3.12817 18.582 4.80886 17.9718 6.02491 17.973C7.24097 17.9743 8.8724 18.582 9.93075 20.2101C9.99917 20.3154 10.018 20.445 9.95628 20.5544C9.70877 20.993 8.94028 21.8633 8.38522 21.9223C7.74746 21.9901 6.07914 21.9996 6.0262 21.9999C5.97322 21.9996 4.2534 21.9901 3.61535 21.9223C3.06029 21.8633 2.2918 20.993 2.04429 20.5544C1.98254 20.445 2.00139 20.3154 2.06982 20.2101Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
</svg></i>
                    </a></li>
                    <span class="link-name">stage</span>
				<li><a href="{{ path('Home') }}">
                    <i class="uil uil-estate"></i>
                    <span class="link-name">Accueil</span>
                </a></li>
            </ul>
            
            <ul class="logout-mode">
                <li><a href="#" id="logoutLink">
                    <i class="uil uil-signout"></i>
                    <span class="link-name">Se déconnecter</span>
                    <form id="logoutForm" action="{{ path('logout') }}" method="post" style="display: none;">
                    </form>
                </a></li>
                <li class="mode">
                    <a href="#">
                        <i class="uil uil-moon"></i>
                    <span class="link-name">Mode sombre</span>
                </a>

                <div class="mode-toggle">
                  <span class="switch"></span>
                </div>
            </li>
            </ul>
        </div>
    </nav>

    <section class="dashboard">
        <div class="top">
            <i class="uil uil-bars sidebar-toggle"></i>

            <div class="search-box">
                <i class="uil uil-search"></i>
                <input type="text" placeholder="Chercher ici...">
            </div>
            
            <img src="/images/profile.png" alt="">
        </div>

        <div class="dash-content">
            <div class="overview">
                <div class="title">
                    <i class="uil uil-key-skeleton"></i>
                    <span class="text">Mot de Passe</span>
                </div>

                <div class="container d-flex justify-content-center align-items-center" style="margin-top : 20px; max-width: 800px;">
                        <div class="col-md-6 right-box">
                            <div class="row align-items-center" style="margin-top : 60px;">
                                <div class="header-text mb-4 p-0">
                                    <h2 class="text-danger">Changer mot de passe</h2>
                                </div>
                                <div class="card-body">
                                    <form action="{{ path('savePasswordAdmin') }}" method="post" id="resetPasswordForm">
                                        <div class="form-group">
                                            <input type="password" name="password" id="password" class="form-control hm" placeholder="Entrez votre nouveau mot de passe" autofocus required/>
                                            <span style="color: red;"><small id="pwdError"></small></span>
                                        </div>
                                        <br>
                                        <div class="form-group">
                                            <input type="password" name="confirmPassword" id="confirm" class="form-control hm" placeholder="Confirmer le nouveau mot de passe" autofocus required/>
                                            <span style="color: red;"><small id="confirmError"></small></span>
                                        </div>
                                        <div class="text-center mt-3">
                                        <button type="submit" class="btn btn-danger mt-2 mb-3">Enregistrer</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

<script>
document.getElementById('resetPasswordForm').addEventListener('submit', function(event)  {
  var password = document.querySelector('#password').value;
  var confirm = document.querySelector('#confirm').value;
  var pwdError = document.getElementById('pwdError');
  var confirmError = document.getElementById('confirmError');

  var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/;

  if (regex.test(password)) {
    pwdError.textContent = '';
    if (password === confirm) {
      confirmError.textContent = '';
      setTimeout(function(){
        alert("Mot de passe changé avec succés");
      },500);
    } else {
      event.preventDefault();
      confirmError.textContent = 'Confirmer avec la meme mot de passe';
    }
} else {
    event.preventDefault();
     pwdError.textContent = 'Le mot de passe doit avoir au moins 8 caractères, inclure des majuscules, des minuscules, un chiffre et un caractère spécial';
}
});

document.getElementById('logoutLink').addEventListener('click', function(event) {
            event.preventDefault(); // Stop the link from causing a page navigate
            document.getElementById('logoutForm').submit(); // Submit the invisible form
        });
</script>

<script src="/js/dashboard.js"></script>

</body>
</html>